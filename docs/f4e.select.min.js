"use strict";!function(f,t,e){var s={multiple:!0,searchnoitem:"No item found",seperator:", ",toolbar:!0,searchtype:"contains",sort:!0,search:!0,selectlimit:0,size:5,description:"Select Description",newoption:"Add New",selecttext:"please select...",width:20,buttontype:"select",wrapbuttontext:!1},n="Type to add new item",l={button:{button:Handlebars.compile("{{#if wraptext}}<a class='f4e-button' style='width:{{width}}vw;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;'>{{text}}</a>{{else}}<a class='f4e-button' style='width:{{width}}vw'>{{text}}</a>{{/if}}"),link:Handlebars.compile("{{#if wraptext}}<a class='f4e-button-link' style='width:{{width}}vw;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;'>{{text}}</a>{{else}}<a class='f4e-button-link' style='width:{{width}}vw;'>{{text}}</a>{{/if}}"),select:Handlebars.compile("{{#if wraptext}}<div class='f4e-button-select' style='width:{{width}}vw;'><div style='width:{{selectwidth}}vw;float:left;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;'>{{text}}</div></div>{{else}}<div class='f4e-button-select' style='width:{{width}}vw;'><div style='float:left;width:{{selectwidth}}vw;'>{{text}}</div></div>{{/if}}")},option:Handlebars.compile("<option value='{{value}}'>{{text}}</option>"),searchBox:Handlebars.compile("<div class='searchbox-container'><input type='text' class='searchbox'><div style='position:absolute;right:22px;top:13px'><i class='fa fa-search' style='margin-right:-10px'/></div></div>"),newOption:Handlebars.compile("{{#if newOptionEnabled}}<div class='addnew'><a class='f4-add-new-button'>{{newOptionText}}</a></div>{{/if}}{{#if descriptionEnabled}}<div class='addnewdescription'>{{description}}</div>{{/if}}"),toolbar:Handlebars.compile("<div class='f4e-toolbar'>{{#if multiple}}<i class='f4e-toolbarbutton fa fa-fw fa-check'/><i class='f4e-toolbarbutton fa fa-fw fa-remove'/>{{/if}}{{#if sort}}<i class='f4e-toolbarbutton fa fa-fw fa-sort'/>{{/if}}</div>"),menuItems:Handlebars.compile("<div class='f4e-menu-items'style='max-height:{{menuItemsMaxHeight}}vh;overflow:auto'>{{#if nooptions}}<div class='no-search'>{{noSearchFoundText}}</div>{{else}}{{#each options}}{{#if isDataDividerEnabled}}<hr/>{{else}}{{#if isDisabled}}<div class='f4e-menu-item disabled' value='{{val}}'>{{else}}<div class='f4e-menu-item' value='{{val}}'>{{/if}}{{#if isfaClassEnabled}}<i class='{{faClass}}' style='margin-right:5px'/>{{/if}}{{#if isDataContentEnabled}}{{{dataContent}}}{{else}}<span>{{optionText}}</span>{{/if}}{{#if isDataSubtextEnabled}}<small class='f4e-subtext'>{{dataSubtext}}</small>{{/if}}{{#if isChecked}}<i class='fa fa-check' style='margin-left:5px'/>{{/if}}</div>{{/if}}{{/each}}{{/if}}</div>")};function o(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function i(t,e){this.$selectElement=f(t),this.settings=f.extend({},s,e,this.$selectElement.data()),this.selectedItems=[],this.$dropDown=null,this.sortedBy="",this.init()}i.prototype={init:function(){var t={text:this.settings.selecttext,wraptext:this.settings.wrapbuttontext,width:this.settings.width,selectwidth:.85*this.settings.width};this.$dropDown=f("<div class='f4e-dropdown'>"+l.button[this.settings.buttontype](t)+"</div>"),this.$selectElement.after(this.$dropDown),this.$selectElement.css("display","none"),this.bindEvents()},bindEvents:function(){var s=this;f(t).on("click",function(t){s.destroyMenu()}),this.$dropDown.on("click",function(t){t.stopPropagation()}),this.$dropDown.on("click","[class*='f4e-button']",function(t){s.clickOpenMenuCallback(t)}),this.$dropDown.on("click",".f4e-menu-item",function(t){var e={val:f(this).attr("value"),text:f(this).text()};s.clickMenuItemCallback(t,e)}),this.$dropDown.on("keyup",".searchbox",function(t){var e=f(this).val();s.typeSearchBoxCallback(t,e)}),this.$dropDown.on("click",".f4-add-new-button",function(t){s.clickAddNewOptionCallback(t)}),this.$dropDown.on("click",".f4e-toolbar .fa-check",function(t){s.selectAllItemsCallback(t)}),this.$dropDown.on("click",".f4e-toolbar .fa-remove",function(t){s.clickDeselectAllCallback(t)}),this.$dropDown.on("click",".f4e-toolbar .fa-sort",function(t){s.clickSortAllCallback(t)})},unbindEvents:function(){this.$dropDown.off("[class*='f4e']")},destroy:function(){this.unbindEvents(),this.$dropDown.remove()},clickDeselectAllCallback:function(){0!=this.selectedItems.length&&(this.selectedItems=[],this.$selectElement.find("option").removeAttr("selected"),null!=this.settings.ondeselectall&&this.settings.ondeselectall(),this.setButtonText(),this.$dropDown.find(".f4e-menu-item .fa-check").remove())},clickAddNewOptionCallback:function(t){var e=this.$dropDown.find(".searchbox").val();if(""!=e){var s=(o()+o()+"-"+o()+"-4"+o().substr(0,3)+"-"+o()+"-"+o()+o()+o()).toLowerCase();if(null!=this.settings.onNewOption){var i=this.settings.onNewOption(e);null!=i&&(s=i)}this.$selectElement.prepend("<option value='"+s+"'>"+e+"</option>"),this.selectItem({val:s,text:e}),this.renderMenuItems(null,!0)}else this.$dropDown.find(".searchbox").attr("placeholder",n)},typeSearchBoxCallback:function(t,e){this.renderMenuItems(e,!0)},clickMenuItemCallback:function(t,e){this.selectItem(e)},clickOpenMenuCallback:function(t){0==this.$dropDown.find(".f4e-menu-items").length?this.displayMenu():this.destroyMenu()},selectAllItemsCallback:function(t){var e=this.$selectElement.find("option:not([disabled])"),s=this.settings.maxOptions;return null==s||s>=e.length?(this.selectedItems=f.map(e,function(t,e){return{val:f(t).attr("value"),text:f(t).text()}}),this.$selectElement.find("option:not([disabled])").attr("selected",!0),null!=this.settings.onSelectAll&&this.settings.onSelectAll(),this.setButtonText(),this.$dropDown.find(".f4e-menu-item .fa-check").remove(),this.$dropDown.find(".f4e-menu-item").append("<i class='fa fa-check' style='margin-left:5px'/>"),e.length):0},clickSortAllCallback:function(){""==this.sortedBy||"desc"==this.sortedBy?(this.$selectElement.find("option").sort(function(t,e){return f(t).text()>f(e).text()}).appendTo(this.$selectElement),this.sortedBy="asc"):(this.$selectElement.find("option").sort(function(t,e){return f(t).text()<f(e).text()}).appendTo(this.$selectElement),this.sortedBy="desc"),this.renderMenuItems(null,!0)},renderMenu:function(){var t="<div class='f4e-menu' style='width:"+this.settings.width+"vw'>";return t+="<div>",t+=this.renderSearchBox(),t+=this.renderMenuItems(null,!1),t+=this.renderNewOption(),t+="</div>",t+="<div>",t+=this.renderToolbar(),t+="</div>"},renderToolbar:function(){if(this.settings.toolbar){var t={multiple:this.settings.multiple,sort:this.settings.sort};return l.toolbar(t)}return""},renderNewOption:function(){var t={newOptionEnabled:""!=this.settings.newoption,newOptionText:this.settings.newoption,descriptionEnabled:""!=this.settings.description,description:this.settings.description};return l.newOption(t)},renderSearchBox:function(){return this.settings.search?l.searchBox({}):""},renderMenuItems:function(d,t){var r=this,e=this.settings.size,s=this.$selectElement.find("option"),h={menuItemsMaxHeight:18,menuItemLineHeight:4,options:[],searchText:d,noSearchFoundText:r.settings.searchnoitem};null!=e&&(h.menuItemsMaxHeight=6*e),s.each(function(t){var e=f(this).attr("value"),s=f(this).text(),i=f(this).attr("data-class"),n=f(this).get(0).hasAttribute("data-disabled"),l=f(this).attr("data-content"),o=f(this).attr("data-subtext"),a=f(this).get(0).hasAttribute("data-divider");if(null!=d){var c=s.toLowerCase().indexOf(d.toLowerCase());if("contains"==r.settings.searchtype&&-1==c)return!0;if("starts"==r.settings.searchtype&&0!=c)return!0}h.options.push({val:e,optionText:s,isfaClassEnabled:null!=i,faClass:i,isDisabled:n,isDataContentEnabled:null!=l,dataContent:l,isDataSubtextEnabled:null!=o,dataSubtext:o,isDataDividerEnabled:a,isChecked:-1!=r.selectedItems.findIndex(function(t){return t.val==e})})}),h.nooptions=0==h.options.length&&null!=d;var i=l.menuItems(h);return t&&(this.$dropDown.find(".f4e-menu-items").remove(),this.$dropDown.find(".searchbox-container").after(i)),i},setButtonText:function(){var s=this,i="";0<this.selectedItems.length?this.selectedItems.forEach(function(t,e){i+=t.text,e!=s.selectedItems.length-1&&(i+=s.settings.seperator)}):i=this.settings.selecttext,"select"==this.settings.buttontype?this.$dropDown.find("[class*='f4e-button'] div").text(i):this.$dropDown.find("[class*='f4e-button']").text(i)},displayMenu:function(){var t=f(this.renderMenu());this.$dropDown.find("[class*='f4e-button']").next().remove(),this.$dropDown.find("[class*='f4e-button']").after(t),null!=this.settings.onOpen&&this.settings.onOpen()},destroyMenu:function(){this.$dropDown.find(".f4e-menu").remove(),null!=this.settings.onClose&&this.settings.onClose()},selectItem:function(e){var t=this.selectedItems.findIndex(function(t){return t.val==e.val});if(!this.$dropDown.find('.f4e-menu-item[value="'+e.val+'"]').hasClass("disabled"))if(-1==t){if(this.settings.multiple){if(0==this.settings.selectlimit)this.selectedItems.push(e);else{if(!(0!=this.settings.selectlimit&&this.selectedItems.length+1<=this.settings.selectlimit))return;this.selectedItems.push(e)}this.$dropDown.find('.f4e-menu-item[value="'+e.val+'"]').append("<i class='fa fa-check' style='margin-left:5px'/>")}else this.selectedItems=[e],this.destroyMenu();null!=this.settings.onSelect&&this.settings.onSelect(e),this.$selectElement.find('option[value="'+e.val+'"]').attr("selected",!0),this.setButtonText()}else this.selectedItems.splice(t,1),null!=this.settings.onDeselect&&this.settings.onDeselect(e),this.$selectElement.find('option[value="'+e.val+'"]').removeAttr("selected"),this.setButtonText(),this.settings.multiple?this.$dropDown.find('.f4e-menu-item[value="'+e.val+'"] .fa-check').remove():this.destroyMenu()},setSelected:function(t){var e=this.$selectElement.find('option[value="'+t+'"]');if(0==e.length)return!1;this.selectItem({val:t,text:e.text()})},addOption:function(t,e){var s=l.option(t);null==e||e<0?this.$selectElement.prepend(s):0==e?this.$selectElement.prepend(s):e==this.$selectElement.find("option").length-1?this.$selectElement.append(s):e>=this.$selectElement.find("option").length?this.$selectElement.append(s):this.$selectElement.find("option:nth-of-type("+e+")").after(s),this.renderMenuItems(null,!0)},removeOption:function(t){this.$selectElement.find('option[value="'+t+'"]').remove(),this.renderMenuItems(null,!0)}},f.f4eselect=f.fn.f4eselect=function(t){return this.each(function(){f.data(this,"f4eselect")||f.data(this,"f4eselect",new i(this,t))})},f.f4eselect.getSelected=function(t){return f(t).data().f4eselect.selectedItems},f.f4eselect.setSelected=function(t,e){f(t).data().f4eselect.setSelected(e)},f.f4eselect.close=function(t){f(t).data().f4eselect.destroyMenu()},f.f4eselect.open=function(t){f(t).data().f4eselect.displayMenu()},f.f4eselect.destroy=function(t){f(t).data().f4eselect.destroy()},f.f4eselect.addOption=function(t,e,s){f(t).data().f4eselect.addOption(e,s)},f.f4eselect.removeOption=function(t,e){f(t).data().f4eselect.removeOption(e)}}(jQuery,window,document);
