"use strict";!function(f,e,t){var n={multiple:!0,searchnoitem:"No item found",seperator:", ",toolbar:!0,searchtype:"contains",sort:!0,search:!0,selectlimit:0,size:5,description:"Select Description",newoption:"Add New",selecttext:"please select..."},i={option:Handlebars.compile("<option value='{{value}}'>{{text}}</option>"),searchBox:Handlebars.compile("<div class='searchbox-container'><input type='text' class='searchbox'><div style='position:absolute;right:22px;top:13px'><i class='fa fa-search' style='margin-right:-10px'/></div></div>"),newOption:Handlebars.compile("{{#if newOptionEnabled}}<div class='addnew'><a class='f4-add-new-button'>{{newOptionText}}</a></div>{{/if}}{{#if descriptionEnabled}}<div class='addnewdescription'>{{description}}</div>{{/if}}"),toolbar:Handlebars.compile("<div class='f4e-toolbar'>{{#if multiple}}<i class='f4e-toolbarbutton fa fa-fw fa-check'/><i class='f4e-toolbarbutton fa fa-fw fa-remove'/>{{/if}}{{#if sort}}<i class='f4e-toolbarbutton fa fa-fw fa-sort'/>{{/if}}</div>"),menuItems:Handlebars.compile("<div class='f4e-menu-items'style='max-height:{{menuItemsMaxHeight}}vh;overflow:auto'>{{#if nooptions}}<div class='no-search'>{{noSearchFoundText}}</div>{{else}}{{#each options}}{{#if isDataDividerEnabled}}<hr/>{{else}}{{#if isDisabled}}<div class='f4e-menu-item' disabled style='line-height:4vh' value='{{val}}'>{{else}}<div class='f4e-menu-item' style='line-height:4vh' value='{{val}}'>{{/if}}{{#if isfaClassEnabled}}<i class='{{faClass}}' style='margin-right:5px'/>{{/if}}{{#if isDataContentEnabled}}{{{dataContent}}}{{else}}<span>{{optionText}}</span>{{/if}}{{#if isDataSubtextEnabled}}<small class='f4e-subtext'>{{dataSubtext}}</small>{{/if}}{{#if isChecked}}<i class='fa fa-check' style='margin-left:5px'/>{{/if}}</div>{{/if}}{{/each}}{{/if}}</div>")};function l(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function s(e,t){this.$selectElement=f(e),this.settings=f.extend({},n,t,this.$selectElement.data()),this.selectedItems=[],this.$dropDown=null,this.sortedBy="",this.init()}s.prototype={init:function(){this.$dropDown=f("<div class='f4e-dropdown'><a class='f4e-button'>"+this.settings.selecttext+"</a></div>"),this.$selectElement.after(this.$dropDown),this.$selectElement.css("display","none"),this.bindEvents()},bindEvents:function(){var n=this;f(e).on("click",function(e){n.destroyMenu()}),this.$dropDown.on("click",function(e){e.stopPropagation()}),this.$dropDown.on("click",".f4e-button",function(e){n.clickOpenMenuCallback(e)}),this.$dropDown.on("click",".f4e-menu-item",function(e){var t={val:f(this).attr("value"),text:f(this).text()};n.clickMenuItemCallback(e,t)}),this.$dropDown.on("keyup",".searchbox",function(e){var t=f(this).val();n.typeSearchBoxCallback(e,t)}),this.$dropDown.on("click",".f4-add-new-button",function(e){n.clickAddNewOptionCallback(e)}),this.$dropDown.on("click",".fa-check",function(e){n.selectAllItemsCallback(e)}),this.$dropDown.on("click",".fa-remove",function(e){n.clickDeselectAllCallback(e)}),this.$dropDown.on("click",".fa-sort",function(e){n.clickSortAllCallback(e)})},unbindEvents:function(){this.$dropDown.off("[class*='f4e']")},destroy:function(){this.unbindEvents(),this.$dropDown.remove()},clickDeselectAllCallback:function(){0!=this.selectedItems.length&&(this.selectedItems=[],this.$selectElement.find("option").removeAttr("selected"),null!=this.settings.ondeselectall&&this.settings.ondeselectall(),this.setButtonText(),this.$dropDown.find(".f4e-menu-item .fa-check").remove())},clickAddNewOptionCallback:function(e){var t=this.$dropDown.find(".searchbox").val();if(""!=t){var n=(l()+l()+"-"+l()+"-4"+l().substr(0,3)+"-"+l()+"-"+l()+l()+l()).toLowerCase();if(null!=this.settings.onNewOption){var s=this.settings.onNewOption(t);null!=s&&(n=s)}this.$selectElement.prepend("<option value='"+n+"'>"+t+"</option>"),this.selectItem({val:n,text:t}),this.renderMenuItems(null,!0)}},typeSearchBoxCallback:function(e,t){this.renderMenuItems(t,!0)},clickMenuItemCallback:function(e,t){this.selectItem(t)},clickOpenMenuCallback:function(e){0==this.$dropDown.find(".f4e-menu-items").length?this.displayMenu():this.destroyMenu()},selectAllItemsCallback:function(e){var t=this.$selectElement.find("option:not([disabled])"),n=this.settings.maxOptions;return null==n||n>=t.length?(this.selectedItems=f.map(t,function(e,t){return{val:f(e).attr("value"),text:f(e).text()}}),this.$selectElement.find("option:not([disabled])").attr("selected",!0),null!=this.settings.onSelectAll&&this.settings.onSelectAll(),this.setButtonText(),this.$dropDown.find(".f4e-menu-item .fa-check").remove(),this.$dropDown.find(".f4e-menu-item").append("<i class='fa fa-check' style='margin-left:5px'/>"),t.length):0},clickSortAllCallback:function(){""==this.sortedBy||"desc"==this.sortedBy?(this.$selectElement.find("option").sort(function(e,t){return f(e).text()>f(t).text()}).appendTo(this.$selectElement),this.sortedBy="asc"):(this.$selectElement.find("option").sort(function(e,t){return f(e).text()<f(t).text()}).appendTo(this.$selectElement),this.sortedBy="desc")},renderMenu:function(){var e="<div class='f4e-menu'>";return e+="<div>",e+=this.renderSearchBox(),e+=this.renderMenuItems(null,!1),e+=this.renderNewOption(),e+="</div>",e+="<div>",e+=this.renderToolbar(),e+="</div>"},renderToolbar:function(){if(this.settings.toolbar){var e={multiple:this.settings.multiple,sort:this.settings.sort};return i.toolbar(e)}return""},renderNewOption:function(){var e={newOptionEnabled:""!=this.settings.newoption,newOptionText:this.settings.newoption,descriptionEnabled:""!=this.settings.description,description:this.settings.description};return i.newOption(e)},renderSearchBox:function(){return this.settings.search?i.searchBox({}):""},renderMenuItems:function(r,e){var d=this,t=this.settings.size,n=this.$selectElement.find("option"),h={menuItemsMaxHeight:18,menuItemLineHeight:4,options:[],searchText:r,noSearchFoundText:d.settings.searchnoitem};null!=t&&(h.menuItemsMaxHeight=6*t),n.each(function(e){var t=f(this).attr("value"),n=f(this).text(),s=f(this).attr("data-class"),i=f(this).attr("disabled"),l=f(this).attr("data-content"),o=f(this).attr("data-subtext"),a=f(this).attr("data-divider");if(null!=r){var c=n.toLowerCase().indexOf(r.toLowerCase());if("contains"==d.settings.searchtype&&-1==c)return!0;if("starts"==d.settings.searchtype&&0!=c)return!0}h.options.push({val:t,optionText:n,isfaClassEnabled:null!=s,faClass:s,isDisabled:null!=i,isDataContentEnabled:null!=l,dataContent:l,isDataSubtextEnabled:null!=o,dataSubtext:o,isDataDividerEnabled:null!=a,isChecked:-1!=d.selectedItems.findIndex(function(e){return e.val==t})})}),h.nooptions=0==h.options.length&&null!=r;var s=i.menuItems(h);return e&&(this.$dropDown.find(".f4e-menu-items").remove(),this.$dropDown.find(".searchbox-container").after(s)),s},setButtonText:function(){var n=this,s="";0<this.selectedItems.length?this.selectedItems.forEach(function(e,t){s+=e.text,t!=n.selectedItems.length-1&&(s+=n.settings.seperator)}):s=this.$selectElement.attr("data-selecttext"),this.$dropDown.find(".f4e-button").text(s)},displayMenu:function(){var e=f(this.renderMenu());this.$dropDown.find(".f4e-button").next().remove(),this.$dropDown.find(".f4e-button").after(e),null!=this.settings.onOpen&&this.settings.onOpen()},destroyMenu:function(){this.$dropDown.find(".f4e-menu").remove(),null!=this.settings.onClose&&this.settings.onClose()},selectItem:function(t){var e=this.selectedItems.findIndex(function(e){return e.val==t.val});if(!this.$dropDown.find('.f4e-menu-item[value="'+t.val+'"]').hasClass("disabled"))if(-1==e){if(this.settings.multiple){if(0==this.settings.selectlimit)this.selectedItems.push(t);else{if(!(0!=this.settings.selectlimit&&this.selectedItems.length+1<=this.settings.selectlimit))return;this.selectedItems.push(t)}this.$dropDown.find('.f4e-menu-item[value="'+t.val+'"]').append("<i class='fa fa-check' style='margin-left:5px'/>")}else this.selectedItems=[t],this.destroyMenu();null!=this.settings.onSelect&&this.settings.onSelect(t),this.$selectElement.find('option[value="'+t.val+'"]').attr("selected",!0),this.setButtonText()}else this.selectedItems.splice(e,1),null!=this.settings.onDeselect&&this.settings.onDeselect(t),this.$selectElement.find('option[value="'+t.val+'"]').removeAttr("selected"),this.setButtonText(),this.settings.multiple?this.$dropDown.find('.f4e-menu-item[value="'+t.val+'"] .fa-check').remove():this.destroyMenu()},setSelected:function(e){var t=this.$selectElement.find('option[value="'+e+'"]');if(0==t.length)return!1;this.selectItem({val:e,text:t.text()})},addOption:function(e,t){var n=i.option(e);null==t||t<0?this.$selectElement.prepend(n):0==t?this.$selectElement.prepend(n):t==this.$selectElement.find("option").length-1?this.$selectElement.append(n):t>=this.$selectElement.find("option").length?this.$selectElement.append(n):this.$selectElement.find("option:nth-of-type("+t+")").after(n),this.renderMenuItems(null,!0)},removeOption:function(e){this.$selectElement.find('option[value="'+e+'"]').remove(),this.renderMenuItems(null,!0)}},f.f4eselect=f.fn.f4eselect=function(e){return this.each(function(){f.data(this,"f4eselect")||f.data(this,"f4eselect",new s(this,e))})},f.f4eselect.getSelected=function(e){return f(e).data().f4eselect.selectedItems},f.f4eselect.setSelected=function(e,t){f(e).data().f4eselect.setSelected(t)},f.f4eselect.close=function(e){f(e).data().f4eselect.destroyMenu()},f.f4eselect.open=function(e){f(e).data().f4eselect.displayMenu()},f.f4eselect.destroy=function(e){f(e).data().f4eselect.destroy()},f.f4eselect.addOption=function(e,t,n){f(e).data().f4eselect.addOption(t,n)},f.f4eselect.removeOption=function(e,t){f(e).data().f4eselect.removeOption(t)}}(jQuery,window,document);