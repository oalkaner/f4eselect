"use strict";!function(f,t,e){var s={multiple:!0,searchnoitem:"No item found",seperator:", ",toolbar:!0,searchtype:"contains",sort:!0,search:!0,selectlimit:0,size:5,description:"",newoption:"",selecttext:"please select..."},n={searchBox:Handlebars.compile("<div class='searchbox-container'><input type='text' class='searchbox'><div style='position:absolute;right:22px;top:13px'><i class='fa fa-search' style='margin-right:-10px'/></div></div>"),newOption:Handlebars.compile("{{#if newOptionEnabled}}<div class='addnew'><a class='f4-add-new-button'>{{newOptionText}}</a></div>{{/if}}{{#if descriptionEnabled}}<div class='addnewdescription'>{{description}}</div>{{/if}}"),toolbar:Handlebars.compile("<div class='f4e-toolbar'>{{#if multiple}}<i class='f4e-toolbarbutton fa fa-fw fa-check'/><i class='f4e-toolbarbutton fa fa-fw fa-remove'/>{{/if}}{{#if sort}}<i class='f4e-toolbarbutton fa fa-fw fa-sort'/>{{/if}}</div>"),menuItems:Handlebars.compile("<div class='f4e-menu-items'style='max-height:{{menuItemsMaxHeight}}vh;overflow:auto'>{{#if nooptions}}<div class='no-search'>{{noSearchFoundText}}</div>{{else}}{{#each options}}{{#if isDataDividerEnabled}}<hr/>{{else}}{{#if isDisabled}}<div class='f4e-menu-item' disabled style='line-height:4vh' value='{{val}}'>{{else}}<div class='f4e-menu-item' style='line-height:4vh' value='{{val}}'>{{/if}}{{#if isfaClassEnabled}}<i class='{{faClass}}' style='margin-right:5px'/>{{/if}}{{#if isDataContentEnabled}}{{{dataContent}}}{{else}}<span>{{optionText}}</span>{{/if}}{{#if isDataSubtextEnabled}}<small class='f4e-subtext'>{{dataSubtext}}</small>{{/if}}{{#if isChecked}}<i class='fa fa-check' style='margin-left:5px'/>{{/if}}</div>{{/if}}{{/each}}{{/if}}</div>")};function i(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function l(t,e){this.$selectElement=f(t),this.settings=f.extend({},s,e,this.$selectElement.data()),this.selectedItems=[],this.$dropDown=null,this.sortedBy="",this.init()}l.prototype={init:function(){this.$dropDown=f("<div class='f4e-dropdown'><a class='f4e-button'>"+this.settings.selecttext+"</a></div>"),this.$selectElement.after(this.$dropDown),this.$selectElement.css("display","none"),this.bindEvents()},bindEvents:function(){var s=this;f(t).on("click",function(t){s.destroyMenu()}),this.$dropDown.on("click",function(t){t.stopPropagation()}),this.$dropDown.on("click",".f4e-button",function(t){s.clickOpenMenuCallback(t)}),this.$dropDown.on("click",".f4e-menu-item",function(t){var e={val:f(this).attr("value"),text:f(this).text()};s.clickMenuItemCallback(t,e)}),this.$dropDown.on("keyup",".searchbox",function(t){var e=f(this).val();s.typeSearchBoxCallback(t,e)}),this.$dropDown.on("click",".f4-add-new-button",function(t){s.clickAddNewOptionCallback(t)}),this.$dropDown.on("click",".fa-check",function(t){s.selectAllItemsCallback(t)}),this.$dropDown.on("click",".fa-remove",function(t){s.clickDeselectAllCallback(t)}),this.$dropDown.on("click",".fa-sort",function(t){s.clickSortAllCallback(t)})},clickDeselectAllCallback:function(){0!=this.selectedItems.length&&(this.selectedItems=[],this.$selectElement.find("option").removeAttr("selected"),null!=this.settings.ondeselectall&&this.settings.ondeselectall(),this.setButtonText(),this.$dropDown.find(".f4e-menu-item .fa-check").remove())},clickAddNewOptionCallback:function(t){var e=this.$dropDown.find(".searchbox").val();if(""!=e){var s=(i()+i()+"-"+i()+"-4"+i().substr(0,3)+"-"+i()+"-"+i()+i()+i()).toLowerCase();if(null!=this.settings.onNewOption){var n=this.settings.onNewOption(e);null!=n&&(s=n)}this.$selectElement.prepend("<option value='"+s+"'>"+e+"</option>"),this.selectItem({val:s,text:e}),this.$dropDown.find(".f4e-menu-items").remove(),this.$dropDown.find(".searchbox-container").after(f(this.renderMenuItems()))}},typeSearchBoxCallback:function(t,e){this.$dropDown.find(".f4e-menu-items").remove(),this.$dropDown.find(".searchbox-container").after(f(this.renderMenuItems(e)))},clickMenuItemCallback:function(t,e){this.selectItem(e)},clickOpenMenuCallback:function(t){0==this.$dropDown.find(".f4e-menu-items").length?this.displayMenu():this.destroyMenu()},selectAllItemsCallback:function(t){var e=this.$selectElement.find("option:not([disabled])"),s=this.settings.maxOptions;return null==s||s>=e.length?(this.selectedItems=f.map(e,function(t,e){return{val:f(t).attr("value"),text:f(t).text()}}),this.$selectElement.find("option:not([disabled])").attr("selected",!0),null!=this.settings.onSelectAll&&this.settings.onSelectAll(),this.setButtonText(),this.$dropDown.find(".f4e-menu-item .fa-check").remove(),this.$dropDown.find(".f4e-menu-item").append("<i class='fa fa-check' style='margin-left:5px'/>"),e.length):0},clickSortAllCallback:function(){""==this.sortedBy||"desc"==this.sortedBy?(this.$selectElement.find("option").sort(function(t,e){return f(t).text()>f(e).text()}).appendTo(this.$selectElement),this.sortedBy="asc"):(this.$selectElement.find("option").sort(function(t,e){return f(t).text()<f(e).text()}).appendTo(this.$selectElement),this.sortedBy="desc"),this.$dropDown.find(".f4e-menu-items").remove(),this.$dropDown.find(".searchbox-container").after(f(this.renderMenuItems()))},renderMenu:function(){var t="<div class='f4e-menu'>";return t+="<div>",t+=this.renderSearchBox(),t+=this.renderMenuItems(),t+=this.renderNewOption(),t+="</div>",t+=this.renderToolbar(),t+="</div>"},renderToolbar:function(){if(this.settings.toolbar){var t={multiple:this.settings.multiple,sort:this.settings.sort};return n.toolbar(t)}return""},renderNewOption:function(){var t={newOptionEnabled:null!=this.$selectElement.attr("data-newoption"),newOptionText:this.$selectElement.attr("data-newoption"),descriptionEnabled:null!=this.$selectElement.attr("data-description"),description:this.$selectElement.attr("data-description")};return n.newOption(t)},renderSearchBox:function(){return this.settings.search?n.searchBox({}):""},renderMenuItems:function(r){var d=this,t=this.settings.size,e=this.$selectElement.find("option"),h={menuItemsMaxHeight:18,menuItemLineHeight:4,options:[],searchText:r,noSearchFoundText:d.settings.searchnoitem};return null!=t&&(h.menuItemsMaxHeight=6*t),e.each(function(t){var e=f(this).attr("value"),s=f(this).text(),n=f(this).attr("class"),i=f(this).attr("disabled"),l=f(this).attr("data-content"),o=f(this).attr("data-subtext"),a=f(this).attr("data-divider");if(null!=r){var c=s.toLowerCase().indexOf(r.toLowerCase());if("contains"==d.settings.searchtype&&-1==c)return!0;if("starts"==d.settings.searchtype&&0!=c)return!0}h.options.push({val:e,optionText:s,isfaClassEnabled:null!=n,faClass:n,isDisabled:null!=i,isDataContentEnabled:null!=l,dataContent:l,isDataSubtextEnabled:null!=o,dataSubtext:o,isDataDividerEnabled:null!=a,isChecked:-1!=d.selectedItems.findIndex(function(t){return t.val==e})})}),h.nooptions=0==h.options.length&&null!=r,n.menuItems(h)},setButtonText:function(){var s=this,n="";0<this.selectedItems.length?this.selectedItems.forEach(function(t,e){n+=t.text,e!=s.selectedItems.length-1&&(n+=s.settings.seperator)}):n=this.$selectElement.attr("data-selecttext"),this.$dropDown.find(".f4e-button").text(n)},displayMenu:function(){var t=f(this.renderMenu());this.$dropDown.find(".f4e-button").next().remove(),this.$dropDown.find(".f4e-button").after(t),null!=this.settings.onOpen&&this.settings.onOpen()},destroyMenu:function(){this.$dropDown.find(".f4e-menu").remove(),null!=this.settings.onClose&&this.settings.onClose()},selectItem:function(e){var t=this.selectedItems.findIndex(function(t){return t.val==e.val});if(!this.$dropDown.find('.f4e-menu-item[value="'+e.val+'"]').hasClass("disabled"))if(-1==t){if(this.settings.multiple){if(0==this.settings.selectlimit)this.selectedItems.push(e);else{if(!(0!=this.settings.selectlimit&&this.selectedItems.length+1<=this.settings.selectlimit))return;this.selectedItems.push(e)}this.$dropDown.find('.f4e-menu-item[value="'+e.val+'"]').append("<i class='fa fa-check' style='margin-left:5px'/>")}else this.selectedItems=[e],this.destroyMenu();null!=this.settings.onSelect&&this.settings.onSelect(e),this.$selectElement.find('option[value="'+e.val+'"]').attr("selected",!0),this.setButtonText()}else this.selectedItems.splice(t,1),null!=this.settings.onDeselect&&this.settings.onDeselect(e),this.$selectElement.find('option[value="'+e.val+'"]').removeAttr("selected"),this.setButtonText(),this.settings.multiple?this.$dropDown.find('.f4e-menu-item[value="'+e.val+'"] .fa-check').remove():this.destroyMenu()}},(f.fn.f4eselect=function(t){return this.each(function(){f.data(this,"f4eselect")||f.data(this,"f4eselect",new l(this,t))})}).selectedItems=function(){f(this).data()}}(jQuery,window,document);